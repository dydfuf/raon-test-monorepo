import path from "path";
import fs from "fs";

let index = `// @ts-nocheck
// This file is autogenerated by scripts/build-registry.ts
// Do not edit this file directly.
import * as React from "react"

export const Index: Record<string, any> = {`;

const REGISTRY_PATH = path.join(process.cwd(), "registry/ui");
const files = fs.readdirSync(REGISTRY_PATH);

console.log(files);
for (const file of files) {
  index += `
  "${file.replace(".tsx", "")}": {
    name: "${file}",
    type: "component",
    component: React.lazy(() => import("registry/ui/${file}")),
    files: ["registry/ui/${file}"],
  },`;
}
index += `
}`;

fs.writeFileSync(path.join(process.cwd(), "__registry__/index.tsx"), index);
